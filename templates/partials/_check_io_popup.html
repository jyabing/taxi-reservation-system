{# templates/partials/_check_io_popup.html #}
<div id="popup" style="display:none;
                      position:fixed;
                      top:30%;
                      left:35%;
                      background:#fff;
                      border:1px solid #ccc;
                      padding:20px;
                      z-index:1000;">

  <form method="post" action="{% url 'confirm_check_io' %}">
    {% csrf_token %}
    <input type="hidden" name="reservation_id" id="popup_reservation_id">
    <input type="hidden" name="action_type"    id="popup_action_type">
    <label>实际时间：</label>
    <input type="datetime-local" name="actual_time" required>
    <br><br>
    <button type="submit">确认</button>
    <button type="button"
            onclick="document.getElementById('popup').style.display='none'">
      取消
    </button>
  </form>
</div>

<script>
function openTimePopup(reservationId, actionType) {
  // 一定要先给隐藏字段赋值
  document.getElementById('popup_reservation_id').value = reservationId;
  document.getElementById('popup_action_type').value    = actionType;
  // 然后再打开弹窗
  document.getElementById('popup').style.display = 'block';
}
</script>
