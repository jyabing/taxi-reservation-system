{% extends 'base.html' %}
{% load static %}
{% block content %}

<h2>ğŸ‘¤ æˆ‘çš„èµ„æ–™</h2>

<table border="1" cellpadding="8">
    <tr>
      <th>ç”¨æˆ·å</th>
      <td>{{ request.user.username }}</td>
      <td></td>
    </tr>
    <tr>
      <th>é‚®ç®±</th>
      <td>{{ request.user.email }}</td>
      <td><a href="{% url 'edit_profile' %}">âœï¸ ä¿®æ”¹é‚®ç®±</a></td>
    </tr>
    <tr>
      <th>å¯†ç </th>
      <td>********</td>
      <td><a href="{% url 'change_password' %}">ğŸ” ä¿®æ”¹å¯†ç </a></td>
    </tr>

    {# åªæ˜¾ç¤ºå·²é€‰çš„é‚£ä¸€é¡¹ #}
    {% if request.user.is_formal %}
    <tr>
      <th>å‘˜å·¥ç±»å‹</th>
      <td>æ­£å¼å¸æœº</td>
      <td></td>
    </tr>
    {% elif request.user.is_temporary %}
    <tr>
      <th>å‘˜å·¥ç±»å‹</th>
      <td>ä¸´æ—¶å¸æœº</td>
      <td></td>
    </tr>
    {% endif %}

    <tr>
      <th>æ³¨å†Œæ—¶é—´</th>
      <td>{{ request.user.date_joined }}</td>
      <td></td>
    </tr>

    <tr>
      <th>æœˆåº¦ç»Ÿè®¡</th>
      <td><a href="{% url 'my_stats' %}">æŸ¥çœ‹</a></td>
      <td></td>
    </tr>

    <tr>
      <th>æ—¥å ±è®°å½•</th>
      <td><a href="{% url 'my_daily_reports' %}">æŸ¥çœ‹</a></td>
      <td></td>
    </tr>
  </table>

  <h3 style="margin-top:2em;">ğŸš• æˆ‘çš„ä¹˜åŠ¡æ—¥æŠ¥</h3>
{% if dailyreports %}
  <table border="1" cellpadding="6" style="min-width:360px;">
    <tr>
      <th>æ—¥æœŸ</th>
      <th>å¤‡æ³¨</th>
      <th>æ˜ç»†ï¼ˆä»…å±•ç¤ºï¼‰</th>
    </tr>
    {% for report in dailyreports %}
      <tr>
        <td>{{ report.date }}</td>
        <td>{{ report.note|default:"æ— " }}</td>
        <td>
          {% if report.items.all %}
            <ul>
              {% for item in report.items.all %}
                <li>
                  {{ item.ride_time }}ï¼Œ{{ item.ride_from }}â†’{{ item.ride_to }}ï¼Œ
                  ç”·{{ item.num_male }}å¥³{{ item.num_female }}ï¼Œ
                  è´¹ç”¨ï¼š{{ item.meter_fee }}ï¼Œ
                  æ”¯ä»˜ï¼š{{ item.get_payment_method_display }}
                </li>
              {% endfor %}
            </ul>
          {% else %}
            æ— 
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </table>
{% else %}
  <div style="color:#888;margin-top:.7em;">æš‚æ— ä¹˜åŠ¡æ—¥æŠ¥</div>
{% endif %}
  
  {% endblock %}