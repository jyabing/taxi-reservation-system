{% extends 'base.html' %}
{% load time_filters %}
{% block content %}
<h2>ğŸ“ {{ report.date }} æ—¥æŠ¥è¯¦ç»†</h2>
<h3>å¤‡æ³¨ï¼š{{ report.note|default:"æ— " }}</h3>

<!-- åªè¯»å…ƒæ•°æ®å±•ç¤ºåŒº -->
  <div class="row g-3 mb-4 align-items-end">
  <!-- å‡ºå‹¤æ™‚é–“ -->
  <div class="col-auto">
    <label class="form-label d-block">å‡ºå‹¤æ™‚é–“</label>  {{ start_time|date:"Yå¹´næœˆjæ—¥ H:i" }}
  </div>

  <!-- é€€å‹¤æ™‚é–“ -->
  <div class="col-auto">
    <label class="form-label d-block">é€€å‹¤æ™‚é–“</label> {{ end_time|date:"Yå¹´næœˆjæ—¥ H:i" }}
  </div>

  <!-- ç·æ™‚é•· -->
  <div class="col-auto">
    <label class="form-label d-block">ç·æ™‚é•·ï¼š</label>
    <div>{{ duration|time_length }}</div>
  </div>

  <!-- ã‚¬ã‚½ãƒªãƒ³é‡ -->
  <div class="col-auto ms-auto">
    <label class="form-label d-block">ã‚¬ã‚½ãƒªãƒ³é‡ (L)</label>{{ report.gas_volume }} L
  </div>

  <!-- é‡Œç¨‹ -->
  <div class="col-auto">
    <label class="form-label d-block">é‡Œç¨‹ (KM)</label> {{ report.mileage }} KM
  </div>
</div>


{% if report.items.all %}
  <table border="1" style="width:100%;margin-bottom:1.5em;">
    <thead>
      <tr>
        <th>æ—¶é—´</th>
        <th>èµ·ç‚¹</th>
        <th>ç»ˆç‚¹</th>
        <th>ç”·</th>
        <th>å¥³</th>
        <th>é‡‘é¢</th>
        <th>æ”¯ä»˜æ–¹å¼</th>
        <th>æ³¨é‡Š</th>
      </tr>
    </thead>
    <tbody>
      {% for item in report.items.all %}
      <tr {% if item.note %} style="background:#fff9c4" {% endif %}>
        <td>{{ item.ride_time }}</td>
        <td>{{ item.ride_from }}</td>
        <td>{{ item.ride_to }}</td>
        <td>{{ item.num_male }}</td>
        <td>{{ item.num_female }}</td>
        <td>{{ item.meter_fee }}</td>
        <td>{{ item.get_payment_method_display }}</td>
        <td>
            {{ item.note|default:"" }}
            {% if item.note %}<span title="æœ‰æ³¨é‡Š">ğŸ“</span>{% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div style="color:#888;">æ— è¡Œç¨‹æ˜ç»†</div>
{% endif %}

<p><a href="{% url 'my_daily_reports' %}">â† è¿”å›æ—¥æŠ¥æ˜ç»†åˆ—è¡¨</a></p>
{% endblock %}