{% extends "base.html" %}
{% block content %}
<h2>ğŸš— è½¦è¾†é¢„çº¦çŠ¶æ€ä¸€è§ˆ({{ selected_date }})</h2>

<form method="get">
  é€‰æ‹©æ—¥æœŸï¼š<input type="date" name="date" value="{{ selected_date }}">
  <button type="submit">æŸ¥è¯¢</button>
</form>

<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>ç…§ç‰‡</th>  <!-- âœ… æ–°å¢ç…§ç‰‡åˆ— -->
    <th>è½¦ç‰Œå·</th>
    <th>è½¦å‹</th>
    <th>çŠ¶æ€</th>
  </tr>
  {% for vehicle, info in status_map.items %}
  <tr>
    <td>
      {% if vehicle.images.all %}
        <img src="{{ vehicle.images.first.image.url }}" width="60" height="45" style="object-fit:cover; border-radius:4px;">
      {% else %}
        <span style="color:gray;">æ— </span>
      {% endif %}
    </td>
    <td><a href="{% url 'vehicle_detail' vehicle.id %}">{{ vehicle.license_plate }}</a></td>
    <td>{{ vehicle.model }}</td>
    <td>
      {% if info.status == "available" %}
        <span style="color:blue;">å¯é¢„çº¦</span>
        {% if not info.user_reservation %}
          <br><a href="{% url 'make_reservation' vehicle.id %}?date={{ selected_date }}" style="color:red;">ç‚¹æ­¤é¢„çº¦</a>
        {% endif %}
      {% elif info.status == "pending" %}
        <span style="color:orange;">ç”³è¯·ä¸­</span>
      {% elif info.status == "reserved" %}
        <span style="color:purple;">å·²é¢„çº¦</span>
      {% elif info.status == "out" %}
        <span style="color:red;">ğŸš— å‡ºåº“</span>
      {% elif info.status == "maintenance" %}
        <span style="color:gray;">ğŸ”§ ç»´ä¿®ä¸­</span>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>

{% endblock %}
