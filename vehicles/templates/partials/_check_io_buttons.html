{# templates/partials/_check_io_buttons.html #}
{# ä¼ å…¥ï¼šr = Reservation #}

{# ç”³è¯·ä¸­ï¼šä¿®æ­£/åˆ é™¤ #}
{% if r.status == 'pending' or r.status == 'applying' %}
  <a href="{% url 'vehicles:edit_reservation' r.id %}" class="btn btn-sm btn-outline-primary">âœï¸ ä¿®æ­£</a>
  <form method="post" action="{% url 'vehicles:delete_reservation' r.id %}" style="display:inline;" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
    {% csrf_token %}
    <button type="submit" class="btn btn-sm btn-outline-danger">âŒ åˆ é™¤</button>
  </form>

{# å·²é¢„çº¦ï¼šæœªå‡ºåº“â†’å‡ºåº“æŒ‰é’®ï¼›ï¼ˆæç«¯ï¼‰å·²å‡ºåº“æœªå…¥åº“â†’å…¥åº“æŒ‰é’® #}
{% elif r.status == 'booked' or r.status == 'reserved' %}
  {% if not r.actual_departure %}
    <a href="{% url 'vehicles:edit_reservation' r.id %}" class="btn btn-sm btn-outline-primary">âœï¸ ä¿®æ­£</a>
    <form method="post" action="{% url 'vehicles:delete_reservation' r.id %}" style="display:inline;" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
      {% csrf_token %}
      <button type="submit" class="btn btn-sm btn-outline-danger">âŒ åˆ é™¤</button>
    </form>
    <button type="button"
            class="btn btn-sm btn-success"
            data-bs-toggle="modal"
            data-bs-target="#departureModal"
            data-reservation-id="{{ r.id }}"
            onclick="primeDeparture(this)">ğŸš— å‡ºåº“</button>
  {% elif r.actual_departure and not r.actual_return %}
    <button type="button"
            class="btn btn-sm btn-warning"
            data-bs-toggle="modal"
            data-bs-target="#returnModal"
            data-reservation-id="{{ r.id }}"
            onclick="primeReturn(this)">ğŸ…¿ï¸ å…¥åº“</button>
  {% else %}
    <span class="text-muted">â€”</span>
  {% endif %}

{# å·²å‡ºåº“ï¼šæ˜¾ç¤ºå…¥åº“æŒ‰é’® #}
{% elif r.status == 'out' or r.status == 'departed' %}
  {% if r.actual_departure and not r.actual_return %}
    <button type="button"
            class="btn btn-sm btn-warning"
            data-bs-toggle="modal"
            data-bs-target="#returnModal"
            data-reservation-id="{{ r.id }}"
            onclick="primeReturn(this)">ğŸ…¿ï¸ å…¥åº“</button>
  {% else %}
    <span class="text-muted">â€”</span>
  {% endif %}

{# å·²å®Œæˆ / å·²å–æ¶ˆ #}
{% elif r.status == 'done' or r.status == 'completed' %}
  <span class="text-muted">âœ… å®Œäº†</span>
{% elif r.status == 'cancel' or r.status == 'canceled' %}
  <span class="text-muted">âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>
{% else %}
  <span class="text-muted">â€”</span>
{% endif %}
