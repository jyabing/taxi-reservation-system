{% extends 'base.html' %}
{% block content %}

<h2>ğŸš˜ æ‰€æœ‰è½¦è¾† {{ selected_date|date:"Y-m-d" }} çš„é¢„çº¦ä¸€è§ˆ</h2>

<table border="1">
  <tr>
    <th>è½¦ç‰Œå·</th>
    <th>è½¦å‹</th>
    <th>é¢„çº¦çŠ¶æ€</th>
    <th>æ—¶é—´æ®µ</th>
    <th>å¸æœº</th>
  </tr>

  {% for row in data %}
  <tr>
    <td>
      <a href="{% url 'vehicle_monthly_gantt' row.vehicle.id %}">
        {{ row.vehicle.license_plate }}
      </a>
    </td>
    <td>{{ row.vehicle.model }}</td>
    <td style="color:
      {% if row.reservation %}
        {% if row.reservation.status == 'reserved' %}blue
        {% elif row.reservation.status == 'out' %}orange
        {% elif row.reservation.status == 'canceled' %}gray
        {% else %}black
        {% endif %}
      {% else %}red
      {% endif %}
    ">
      {% if row.reservation %}
        {{ row.reservation.get_status_display }}
        {% else %}
            {% if row.is_past %}
               <span style="color: gray;">ğŸ•’ ç©ºç¼ºï¼ˆå·²è¿‡æœŸï¼‰</span>
            {% else %}
               <a href="{% url 'make_reservation' row.vehicle.id %}?date={{ selected_date }}">ğŸ“ é¢„çº¦</a>
            {% endif %}
        {% endif %}
    </td>
    <td>
      {% if row.reservation %}
        {{ row.reservation.start_time|time:"H:i" }} - {{ row.reservation.end_time|time:"H:i" }}
      {% endif %}
    </td>
    <td>
      {% if row.reservation %}
        {{ row.reservation.driver.username }}
      {% endif %}
    </td>
  </tr>
{% endfor %}
</table>

<p><a href="{% url 'daily_selector' %}">â† è¿”å›æ—¥æœŸé€‰æ‹©</a></p>

{% endblock %}