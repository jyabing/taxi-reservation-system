{% extends 'base.html' %}
{% load dict_filters %}
{% block content %}

<h2>ğŸ“… {{ month_display }} æ—¥æŠ¥æ˜ç»†</h2>
<form method="get" style="margin-bottom:1em;">
    <label>æŒ‰æ—¥æœŸï¼š</label>
    <input type="date" name="date" value="{{ selected_date|default:'' }}">
    <label style="margin-left:1.2em;">æŒ‰æœˆä»½ï¼š</label>
    <input type="month" name="month" value="{{ selected_month|default:'' }}">
    <button type="submit" class="btn btn-outline-secondary">æŸ¥æ—¥æŠ¥</button>
    {% if selected_date or selected_month %}
        <a href="{% url 'my_daily_reports' %}" style="margin-left:1.2em;">é‡ç½®</a>
    {% endif %}
</form>

{% if reports %}
<table border="1" style="width:100%;margin-bottom:1.5em;">
    <thead>
    <tr>
        <th>æ—¥æœŸ</th>
        <th>ãƒ¡ãƒ¼ã‚¿æ–™é‡‘åˆè®¡</th>
        <th>æ“ä½œ</th>
        <th>å¤‡æ³¨</th>
    </tr>
    </thead>
    <tbody>
    {% for report in reports %}
    <tr>
        <td>{{ report.date }}</td>
        <td>{{ report_sums|get_item:report.id|default:"0" }}</td>
        <td>
            <a href="{% url 'my_daily_report_detail' report.id %}">æŸ¥çœ‹æ˜ç»†</a>
        </td>
        <td>{{ report.note|default:"æ— " }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
    <div style="color:#888;">æ²¡æœ‰æŸ¥åˆ°æ—¥æŠ¥ã€‚</div>
{% endif %}

<div style="margin-top:1em; font-weight:bold;">
    æœ¬æœŸãƒ¡ãƒ¼ã‚¿æ–™é‡‘åˆè®¡ï¼š{{ total_meter_fee|default:"0" }} å††
</div>

<p><a href="{% url 'profile' %}">â† è¿”å›æˆ‘çš„èµ„æ–™</a></p>
{% endblock %}
